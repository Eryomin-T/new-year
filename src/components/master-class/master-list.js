let actualItem = [
  {
    id: 1,
    datePublish: 1550125544,
    video: 'https://www.youtube.com/embed/vMdq07Q3qU4',
    img: 'images/master-list-card1.jpg',
    title: 'Скетч от команды “Веселые ребята”',
    text: 'Популярная церемония анонимного обмена подарками. Перед вами сайт для организации онлайн жеребьевки на Тайного Санту.'
  },
  {
    id: 2,
    datePublish: 1581315944,
    video: 'https://player.vimeo.com/video/265045525',
    img: 'images/master-list-card2.png',
    title: 'Командное выступление в Полуфинале',
    text: 'Популярная церемония анонимного обмена подарками.'
  },
  {
    id: 3,
    datePublish: 1566714344,
    video: 'https://player.vimeo.com/video/259411563',
    img: 'images/master-list-card3.png',
    title: 'Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы.',
    text: 'Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю.'
  },
  {
    id: 4,
    datePublish: 1573107944,
    video: 'https://player.vimeo.com/video/243244233',
    img: 'images/master-list-card1.jpg',
    title: 'Мы одни должны искупить кровь праведника. ',
    text: 'Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его,'
  },
  {
    id: 5,
    datePublish: 1586672744,
    video: 'https://player.vimeo.com/video/243244233',
    img: 'images/master-list-card1.jpg',
    title: 'Она отказалась очистить Мальту.',
    text: 'Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра.'
  },
  {
    id: 6,
    datePublish: 1613111144,
    video: 'https://www.youtube.com/embed/p-5mhOgSwaY',
    img: 'images/master-list-card1.jpg',
    title: 'Что они сказали Новосильцеву?',
    text: 'Она хочет видеть, ищет заднюю мысль наших действий.'
  },
  {
    id: 7,
    datePublish: 1567923944,
    video: 'https://player.vimeo.com/video/243244233',
    img: 'images/master-list-card1.jpg',
    title: 'Скетч от команды “Веселые ребята”',
    text: 'Популярная церемония анонимного обмена подарками. Перед вами сайт для организации онлайн жеребьевки на Тайного Санту.'
  },
  {
    id: 8,
    datePublish: 1549779944,
    video: 'https://player.vimeo.com/video/243244233',
    img: 'images/master-list-card2.png',
    title: 'Командное выступление в Полуфинале',
    text: 'Популярная церемония анонимного обмена подарками.'
  },
  {
    id: 9,
    datePublish: 1583994344,
    video: 'https://www.youtube.com/embed/oi6e-6PWgiQ',
    img: 'images/master-list-card3.png',
    title: 'Австрия никогда не хотела и не хочет войны. Она предает нас. Россия одна должна быть спасительницей Европы.',
    text: 'Наш благодетель знает свое высокое призвание и будет верен ему. Вот одно, во что я верю.'
  },
  {
    id: 10,
    datePublish: 1601792744,
    video: 'https://www.youtube.com/embed/rJbuc-LxpV8',
    img: 'images/master-list-card1.jpg',
    title: 'Мы одни должны искупить кровь праведника. ',
    text: 'Нашему доброму и чудному государю предстоит величайшая роль в мире, и он так добродетелен и хорош, что Бог не оставит его,'
  },
  {
    id: 11,
    datePublish: 1554186344,
    video: 'https://www.youtube.com/embed/p-5mhOgSwaY',
    img: 'images/master-list-card1.jpg',
    title: 'Она отказалась очистить Мальту.',
    text: 'Англия с своим коммерческим духом не поймет и не может понять всю высоту души императора Александра.'
  },
  {
    id: 12,
    datePublish: 1618208744,
    video: 'https://www.youtube.com/embed/I-AVYrL1M2w',
    img: 'images/master-list-card1.jpg',
    title: 'Что они сказали Новосильцеву?',
    text: 'Она хочет видеть, ищет заднюю мысль наших действий.'
  },
]

let pastMasterClassesArticles = [
  {
    id: 1,
    img: 'images/master-list-card-past1.jpg',
    date: '21.12.2020',
    time: '18:00 МСК',
    title: 'Декор новогоднего носка',
    text: 'Из самых обычных шерстяных ниток можно создавать оригинальные праздничные украшения и новогодние елочные игрушки. Нитки — это безопасный материал, с которым смогут работать даже дошкольники. Мы покажем вам несколько способов изготовления игрушек из шерстяных ниток.',
    contentTitle: 'Что нам понадобится?',
    contentSubtitle: 'Для изготовления елочных игрушек из шерстяных ниток нам понадобятся простые подручные материалы:',
    contentList: ['нитки', 'шерстяные нити', 'клей и картон', 'проволока', 'фурнитура для декора', 'шнуры и ленты', 'блестки и снежный спрей'],
  },
  {
    id: 2,
    img: 'images/master-list-card-past2.jpg',
    date: '10.11.1991',
    time: '14:00 МСК',
    title: 'развал ССР',
    text: 'процессы системной дезинтеграции в социальной структуре, народном хозяйстве',
    contentTitle: 'Причины распада',
    contentSubtitle: 'В настоящее время нет единой оценки и исчерпывающего анализа причин, приведших к распаду СССР. Среди многочисленных факторов, повлиявших на этот процесс, называют следующие:',
    contentList: ['крах прежней идеологии', 'распространение новых идеологических ценностей', 'ослабление союзной власти', 'неблагоприятная динамика цен на нефть', 'государственная цензура,'],
  },
  {
    id: 3,
    img: 'images/master-list-card-past3.jpg',
    date: '05.03.2055',
    time: '18:00 МСК',
    title: 'Киберпанк',
    text: 'Из самых обычных шерстяных ниток можно создавать оригинальные праздничные украшения и новогодние елочные игрушки. Нитки — это безопасный материал, с которым смогут работать даже дошкольники. Мы покажем вам несколько способов изготовления игрушек из шерстяных ниток.',
    contentTitle: 'Что нам понадобится?',
    contentSubtitle: 'Для изготовления елочных игрушек из шерстяных ниток нам понадобятся простые подручные материалы:',
    contentList: ['нитки', 'шерстяные нити', 'клей и картон', 'проволока', 'фурнитура для декора', 'шнуры и ленты', 'блестки и снежный спрей'],
  },
  {
    id: 4,
    img: 'images/master-list-card-past1.jpg',
    date: '05.03.2055',
    time: '18:00 МСК',
    title: 'Киберпанк',
    text: 'Из самых обычных шерстяных ниток можно создавать оригинальные праздничные украшения и новогодние елочные игрушки. Нитки — это безопасный материал, с которым смогут работать даже дошкольники. Мы покажем вам несколько способов изготовления игрушек из шерстяных ниток.',
    contentTitle: 'Что нам понадобится?',
    contentSubtitle: 'Для изготовления елочных игрушек из шерстяных ниток нам понадобятся простые подручные материалы:',
    contentList: ['нитки', 'шерстяные нити', 'клей и картон', 'проволока', 'фурнитура для декора', 'шнуры и ленты', 'блестки и снежный спрей'],
  },
  {
    id: 5,
    img: 'images/master-list-card-past2.jpg',
    date: '10.11.1991',
    time: '14:00 МСК',
    title: 'развал ССР',
    text: 'процессы системной дезинтеграции в социальной структуре, народном хозяйстве',
    contentTitle: 'Причины распада',
    contentSubtitle: 'В настоящее время нет единой оценки и исчерпывающего анализа причин, приведших к распаду СССР. Среди многочисленных факторов, повлиявших на этот процесс, называют следующие:',
    contentList: ['крах прежней идеологии', 'распространение новых идеологических ценностей', 'ослабление союзной власти', 'неблагоприятная динамика цен на нефть', 'государственная цензура,'],
  },
  {
    id: 6,
    img: 'images/master-list-card-past3.jpg',
    date: '05.03.2055',
    time: '18:00 МСК',
    title: 'Киберпанк',
    text: 'Из самых обычных шерстяных ниток можно создавать оригинальные праздничные украшения и новогодние елочные игрушки. Нитки — это безопасный материал, с которым смогут работать даже дошкольники. Мы покажем вам несколько способов изготовления игрушек из шерстяных ниток.',
    contentTitle: 'Что нам понадобится?',
    contentSubtitle: 'Для изготовления елочных игрушек из шерстяных ниток нам понадобятся простые подручные материалы:',
    contentList: ['нитки', 'шерстяные нити', 'клей и картон', 'проволока', 'фурнитура для декора', 'шнуры и ленты', 'блестки и снежный спрей'],
  },
]

let listActual = $('.master-list__items--actuals');
let loadMoreActual = $('.master-list__show-more--actuals');
let currentStepActual = 0;
let stepActual = 3;

let listPast = $('.master-list__items--past');
let loadMorePast = $('.master-list__show-more--past');
let currentStepPast = 0;
let stepPast = 3;

let sortSelectItem = $('.select__dropdown .select__item');

function printItemActual(step, rerender = false) {
  if(rerender){
    listActual.html('');
    currentStepActual = 0;
  }

  if(actualItem.length) {
    let maxStep = currentStepActual + step;
    for(let i = currentStepActual; i < maxStep; i++) {
///////////////ЧТОБЫ БЫЛА ВИДНА ДАТА ДЛЯ СОРТИРОВКИ(в макете ее нет)//////////////
let datePub = actualItem[i].datePublish;
var date = new Date(datePub * 1000);
var year = date.getFullYear();
var month = date.getMonth();
var day = date.getDate();
var hours = date.getHours();
var minutes = "0" + date.getMinutes();
var seconds = "0" + date.getSeconds();
var formattedTime = year+'-'+month+'-'+day+'_'+hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
///////////////////////////////////////////////////////////////////////
      let template = `
        <div class="master-list__item">
          <div class="actual-card" data-video="${actualItem[i].video}">
            <a href="#" class="actual-card__img">
              <img src="${actualItem[i].img}">
            </a>
            <div class="actual-card__text">${formattedTime}</div>
            <div class="actual-card__title">${actualItem[i].title}</div>
            <div class="actual-card__text">${actualItem[i].text}</div>
          </div>
        </div>`;
      listActual.append(template);
    }
    currentStepActual += step;
  }

  if(currentStepActual >= actualItem.length) {
    loadMoreActual.hide();
  }
  else {
    loadMoreActual.show();
  }
}


function printItemPast(step) {
  if(pastMasterClassesArticles.length) {
    let maxStep = currentStepPast + step;
    for(let i = currentStepPast; i < maxStep; i++) {
      let template = `
        <div class="master-list__item">
          <div class="past-card" data-card-post-id="0">
            <a href="#" class="past-card__img">
              <img src="${pastMasterClassesArticles[i].img}">
            </a>
            <div class="past-card__info">
              <span class="past-card__info-date">${pastMasterClassesArticles[i].date}</span>
              <span class="past-card__info-time">${pastMasterClassesArticles[i].time}</span>
            </div>
            <div class="past-card__title">${pastMasterClassesArticles[i].title}</div>
            <div class="past-card__text">${pastMasterClassesArticles[i].text}</div>
            <div class="past-card__watch">
              <a href="#" class="btn-more">Смотреть запись</a>
            </div>
          </div>
        </div>`;
      listPast.append(template);
    }
    currentStepPast += step;
  }

  if(currentStepPast >= pastMasterClassesArticles.length) {
    loadMorePast.hide();
  }
}

function sortCard(sortMethod) {
  if(sortMethod === 'new'){
    actualItem.sort((a, b) => {
      return new Date(b.datePublish) - new Date(a.datePublish);
    })
  }
  else if(sortMethod === 'old') {
    actualItem.sort((a, b) => {
      return new Date(a.datePublish) - new Date(b.datePublish);
    })
  }
  else {
    return false;
  }
  printItemActual(stepActual, true);
  customPopup();
}

printItemActual(stepActual);
loadMoreActual.on('click', function(e){
  e.preventDefault();
  printItemActual(stepActual);
})

printItemPast(stepPast);
loadMorePast.on('click', function(e){
  e.preventDefault();
  printItemPast(stepPast)
})

sortSelectItem.on('click', function() {
  if($(this).attr('data-select-value') === 'new') {
    sortCard('new');
  }
  else if($(this).attr('data-select-value') === 'old') {
    sortCard('old');
  }
})